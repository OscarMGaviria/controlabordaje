<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1e3c72">
    <title>Admin Embarcaciones - Mobile</title>
    <!-- Font Awesome (incluyendo iconos de marcas para WhatsApp) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Estilos principales -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- Estilos específicos de WhatsApp -->
    <link rel="stylesheet" href="styles/whatsapp.css">
</head>
<body>
    <!-- PWA Install Button -->
    <button class="pwa-install" id="pwaInstall"><i class="fas fa-mobile-alt"></i> Instalar App</button>

    <!-- Haptic Feedback Indicator -->
    <div class="haptic-feedback" id="hapticFeedback"></div>

    <!-- Modal para Cambiar Estado -->
    <div class="modal-overlay" id="statusModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-cog"></i>
                    Cambiar Estado
                </div>
                <button class="modal-close" id="statusModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="vessel-info" id="statusModalVesselInfo">
                    <h3 id="statusModalVesselName">Nombre de la Embarcación</h3>
                    <p>Posición en la cola</p>
                </div>

                <div id="statusOptions">
                    <div class="status-option status-en-turno-option" data-status="EN TURNO">
                        <div class="status-option-info">
                            <div class="status-option-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="status-option-text">
                                <div class="status-option-title">EN TURNO</div>
                                <div class="status-option-description">Embarcación esperando su turno</div>
                            </div>
                        </div>
                        <div class="status-option-radio" id="radio-en-turno"></div>
                    </div>

                    <div class="status-option status-embarcando-option" data-status="EMBARCANDO">
                        <div class="status-option-info">
                            <div class="status-option-icon">
                                <i class="fas fa-ship"></i>
                            </div>
                            <div class="status-option-text">
                                <div class="status-option-title">EMBARCANDO</div>
                                <div class="status-option-description">Embarcación actualmente embarcando</div>
                            </div>
                        </div>
                        <div class="status-option-radio" id="radio-embarcando"></div>
                    </div>

                    <div class="status-option status-suspendido-option" data-status="SUSPENDIDO">
                        <div class="status-option-info">
                            <div class="status-option-icon">
                                <i class="fas fa-ban"></i>
                            </div>
                            <div class="status-option-text">
                                <div class="status-option-title">SUSPENDIDO</div>
                                <div class="status-option-description">Embarcación temporalmente fuera de servicio</div>
                            </div>
                        </div>
                        <div class="status-option-radio" id="radio-suspendido"></div>
                    </div>
                </div>

                <div class="warning-message" id="statusWarning" style="display: none;">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span id="statusWarningText"></span>
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-button btn-cancel touch-target" id="statusBtnCancelar">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button class="modal-button btn-confirm touch-target" id="statusBtnConfirmar" disabled>
                    <i class="fas fa-check"></i> Cambiar Estado
                </button>
            </div>
        </div>
    </div>

    <!-- Modal para Cambiar Posición (Solo Admins) -->
    <div class="modal-overlay" id="positionModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-sort-numeric-up"></i>
                    Cambiar Posición
                </div>
                <button class="modal-close" id="positionModalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="vessel-info" id="positionModalVesselInfo">
                    <h3 id="positionModalVesselName">Nombre de la Embarcación</h3>
                    <p>Posición actual en la cola</p>
                </div>

                <div class="input-group">
                    <label class="input-label" for="nuevaPosicion">
                        <i class="fas fa-hashtag"></i> Nueva Posición
                    </label>
                    <input type="number" 
                           id="nuevaPosicion" 
                           class="modal-input touch-target" 
                           placeholder="Ej: 3" 
                           min="1">
                </div>

                <div class="warning-message" style="background: rgba(255, 193, 7, 0.2); border-color: rgba(255, 193, 7, 0.5);">
                    <i class="fas fa-info-circle"></i>
                    Al cambiar la posición, las demás embarcaciones se reorganizarán automáticamente.
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-button btn-cancel touch-target" id="positionBtnCancelar">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button class="modal-button btn-confirm touch-target" id="positionBtnConfirmar" disabled>
                    <i class="fas fa-check"></i> Cambiar Posición
                </button>
            </div>
        </div>
    </div>

    <!-- Modal para Zarpar -->
    <div class="modal-overlay" id="zarparModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-ship"></i>
                    Zarpar Embarcación
                </div>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="vessel-info" id="modalVesselInfo">
                    <h3 id="modalVesselName">Nombre de la Embarcación</h3>
                    <p>Posición en la cola</p>
                </div>

                <div class="input-group">
                    <label class="input-label" for="numPersonas">
                        <i class="fas fa-users"></i> Número de Personas
                    </label>
                    <input type="number" 
                           id="numPersonas" 
                           class="modal-input touch-target" 
                           placeholder="Ej: 8" 
                           min="1" 
                           max="50">
                </div>

                <div class="input-group">
                    <label class="input-label" for="valorViaje">
                        <i class="fas fa-dollar-sign"></i> Valor del Viaje
                    </label>
                    <input type="number" 
                           id="valorViaje" 
                           class="modal-input touch-target" 
                           placeholder="Ej: 150000" 
                           min="0" 
                           step="1000">
                </div>

                <div class="summary-section" id="summarySection" style="display: none;">
                    <div class="summary-title">Resumen del Zarpe</div>
                    <div class="summary-item">
                        <span>Personas:</span>
                        <strong id="summaryPersonas">-</strong>
                    </div>
                    <div class="summary-item">
                        <span>Valor Total:</span>
                        <strong id="summaryValor">$0</strong>
                    </div>
                    <div class="summary-item">
                        <span>Valor por Persona:</span>
                        <strong id="summaryValorPersona">$0</strong>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button class="modal-button btn-cancel touch-target" id="btnCancelar">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button class="modal-button btn-confirm touch-target" id="btnConfirmar" disabled>
                    <i class="fas fa-check"></i> Confirmar Zarpe
                </button>
            </div>
        </div>
    </div>

    <!-- Login Screen -->
    <div class="login-container" id="loginContainer">
        <div class="login-form">
            <div class="login-title">
                <i class="fas fa-cogs"></i>
                Módulo Operador
            </div>
            <form id="loginForm">
                <input type="email" id="email" class="login-input touch-target" placeholder="Correo electrónico" required autocomplete="email">
                <input type="password" id="password" class="login-input touch-target" placeholder="Contraseña" required autocomplete="current-password">
                <button type="submit" class="login-button touch-target" id="loginButton">Iniciar Sesión</button>
            </form>
            <div class="loading" id="loading">
                <div class="loading-spinner"></div>
                Autenticando...
            </div>
            <div class="login-error" id="loginError"></div>
        </div>
    </div>

    <!-- Main App -->
    <div class="admin-container" id="adminContainer">
        <!-- Mobile Header -->
        <div class="mobile-header">
            <div class="header-content">
                <div class="header-left">
                    <div class="header-icon"><i class="fas fa-cogs"></i></div>
                    <div class="header-text">Admin Embarcaciones</div>
                </div>
                <button class="logout-button touch-target" id="logoutButton">Cerrar Sesión</button>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <div class="tabs-container">
                <button class="tab-button touch-target" data-category="lancha-taxi"><i class="fas fa-ship"></i> Lancha Taxi</button>
                <button class="tab-button touch-target" data-category="deportiva"><i class="fas fa-water"></i> Deportiva</button>
                <button class="tab-button touch-target" data-category="planchon"><i class="fas fa-anchor"></i> Planchón</button>
                <button class="tab-button touch-target" data-category="carguero"><i class="fas fa-shipping-fast"></i> Carguero</button>
                <button class="tab-button touch-target" data-category="barco"><i class="fas fa-sailboat"></i> Barco</button>
                <button class="tab-button touch-target" data-category="yate"><i class="fas fa-yacht"></i> Yate</button>
                <button class="tab-button touch-target" data-category="verificar"><i class="fas fa-id-card"></i> Reserva</button>
                <button class="tab-button touch-target" data-category="cambiar-categoria"><i class="fas fa-exchange-alt"></i> Categoría</button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="vessels-title" id="vesselsTitle"><i class="fas fa-hand-point-up"></i> Selecciona una categoría</div>
            <div id="vesselsContent">
                <div class="no-selection">
                    <i class="fas fa-ship"></i> Toca una categoría arriba para ver las embarcaciones disponibles
                    <br><br>
                    <i class="fas fa-mobile-alt"></i> Optimizado para móvil
                </div>
            </div>
        </div>

        <!-- Safe Area Bottom -->
        <div class="safe-area-bottom"></div>
    </div>

    <!-- Scripts -->
    <script src="alerts.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>